<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
    <title>一周预报</title>
    <link rel="stylesheet" href="css/common.css" type="text/css">
    <link rel="stylesheet" href="css/forecast.css" type="text/css">
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/echarts.js"></script>
</head>
<body>
    <div class="page-hd">
        <div class="back">
            <a href="#">
                <img src="img/back.png" alt="">
            </a>
        </div>
        <span class="pg-title">一周预报</span>
    </div>
    <div class="container">
        <ul class="nav-hd">
            <li class="nav-hd-item cur">昌江区</li>
            <li class="nav-hd-item">珠山区</li>
            <li class="nav-hd-item">乐平市</li>
            <li class="nav-hd-item">浮梁县</li>
        </ul>
        <div class="line-box">
            <div id="main" class="line" style="width: 100%;height: 280px;"></div>
        </div>
        <div class="nav-bd">
            <div class="nav-bd-item current">
                <div class="weather-trend">
                    <div class="title">天气趋势</div>
                    <div class="desc">未来一周我市天气逐渐转好，最高气温可达35度左右，早晚气温适宜。</div>
                </div>
            </div>
            <div class="nav-bd-item">
                <div class="weather-trend">
                    <div class="title">天气趋势</div>
                    <div class="desc">未来一周我市天气良好，适合出游。</div>
                </div>
            </div>
            <div class="nav-bd-item">
                <div class="weather-trend">
                    <div class="title">天气趋势</div>
                    <div class="desc">未来一周我市天气晴朗。</div>
                </div>
            </div>
            <div class="nav-bd-item">
                <div class="weather-trend">
                    <div class="title">天气趋势</div>
                    <div class="desc">未来一周我市天气逐渐转好，局部地区有小雨，早晚气温适宜。</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 基于准备好的dom，初始化一个echarts实例
        var myChart=echarts.init(document.getElementById("main"));
        //天气图json对象
        var weatherIcons = {
            'Sunny': 'img/qingtian.png',
            'Cloudy': 'img/duoyun.png',
            'LightRain': 'img/xiaoyu.png',
            'Showers': 'img/zhenyu.png',
            'HeavyRain': 'img/dayu.png',
            'Overcast': 'img/yintian.png',
        };
        //根据传入的data3数据判断相对应的图片，作为x轴刻度标签的背景图
        function setLine(data1,data2,data3) {
            var str = [];
            var temp = "";
            for (var i = 0; i < data3.length; i++) {
                switch (data3[i]) {
                    case "晴":
                        temp = weatherIcons.Sunny;
                        break;
                    case "多云":
                        temp = weatherIcons.Cloudy;
                        break;
                    case "小雨":
                        temp = weatherIcons.LightRain;
                        break;
                    case "阵雨":
                        temp = weatherIcons.Showers;
                        break;
                    case "大雨":
                        temp = weatherIcons.HeavyRain;
                        break;
                    case "阴":
                        temp = weatherIcons.Overcast;
                        break;
                }
                str.push(temp);
            }
            // 指定图表的配置项和数据
            var option = {
                tooltip: {
                    trigger: 'axis'
                },
                // backgroundColor: '#413b41',
                backgroundColor: 'rgba(0,0,0,.2)',
                color:['#f44336','#ffeb3b'],
                legend: {
                    data:['最高气温','最低气温'],
                    // orient:'vertical',
                    textStyle:{         //修改图例中文字颜色
                        color:'#fff'
                    },
                },
                textStyle:{   //修改全局文字颜色
                    color:'#fff'
                },
                grid:{
                    bottom:65, // 图表距离容器下方边距,默认60
                    top:95     //图标距离上方边距--图例文字位置不受影响
                },
                xAxis: [{ //设置x轴
                    type: 'category',
                    boundaryGap: false,
                    data: ['Mon', 'Tue', 'Wed','Thu','Fri','Sat','Sun'],
                    axisLine: {
                        show: false //是否显示坐标轴轴线。
                    },
                    axisTick: {
                        show: false,  //是否显示坐标轴刻度。
                        interval:0
                    },
                    axisLabel: {   //刻度标签--即轴线下的文字
                        formatter: function (value) {
                            return '{' + value + '| }\n{value|' + value + '}';
                        },
                        interval:0, //设置成 0 强制显示所有标签。
                        margin: 20,
                        rich: {     //x轴刻度标签的自定义--图片+文字
                            value: {
                                lineHeight: 20,
                                align: 'center'
                            },
                            Mon: {         //与data中的数组元素要对应
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[0]
                                }
                            },
                            Tue: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[1]
                                }
                            },
                            Wed: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[2]
                                }
                            },
                            Thu: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[3]
                                }
                            },
                            Fri: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[4]
                                }
                            },
                            Sat: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[5]
                                }
                            },
                            Sun: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[6]
                                }
                            },
                        }
                    },
                },{ //设置x轴
                    type: 'category',
                    boundaryGap: false,
                    data: ['Mon', 'Tue', 'Wed','Thu','Fri','Sat','Sun'],
                    axisLine: {
                        show: false //是否显示坐标轴轴线。
                    },
                    axisTick: {
                        show: false,  //是否显示坐标轴刻度。
                        interval:0
                    },
                    axisLabel: {   //刻度标签--即轴线下的文字
                        formatter: function (value) {
                            return '{' + value + '| }\n{value|' + value + '}';
                        },
                        interval:0, //设置成 0 强制显示所有标签。
                        margin: 20,
                        rich: {     //x轴刻度标签的自定义--图片+文字
                            value: {
                                lineHeight: 20,
                                align: 'center'
                            },
                            Mon: {         //与data中的数组元素要对应
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[0]
                                }
                            },
                            Tue: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[1]
                                }
                            },
                            Wed: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[2]
                                }
                            },
                            Thu: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[3]
                                }
                            },
                            Fri: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[4]
                                }
                            },
                            Sat: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[5]
                                }
                            },
                            Sun: {
                                height: 20,
                                align: 'center',
                                backgroundColor: {
                                    image: str[6]
                                }
                            },
                        }
                    },
                }],
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: '{value} °C'
                    },
                    show: false,
                    // max:60,//设置y轴最大值为60
                    // min:-20,
                    axisTick: {
                        show: false,  //是否显示坐标轴刻度。
                    }
                },
                series: [
                    {
                        name:'最高气温',
                        type:'line',
                        data:data1,
                        smooth: true,//圆滑线条
                        itemStyle : { normal: {label : {show: true}}},
                        lineStyle:{
                            color:'#f44336'
                        },
                    },
                    {
                        name:'最低气温',
                        type:'line',
                        data:data2,
                        smooth: true,
                        itemStyle : { normal: {label : {show: true}}},
                        lineStyle:{
                            color:'#ffeb3b'
                        }
                    }
                ]
            };

            // 使用刚指定的配置项和数据显示图表。---echarts实例对象的setOption()方法
            myChart.setOption(option);
        }
        var data1=[32, 33, 34, 38, 29, 30, 30];
        var data2=[26, 26, 25, 25, 23, 22, 21];
        var data3=["晴","阵雨","大雨","晴","晴","多云","阴"];
        setLine(data1,data2,data3);
    </script>
    <script>
        $(function () {
            $(".nav-hd-item").click(function () {
                $(this).addClass("cur").siblings().removeClass("cur");
                var idx=$(this).index();
                $(".nav-bd-item").eq(idx).addClass("current").siblings().removeClass("current");
                switch (idx) {
                    case 0:                                                      //第一个市/区
                        data1=[32, 33, 34, 38, 29, 30, 30];                      //一周最高温
                        data2=[26, 26, 25, 25, 23, 22, 21];                      //一周最低温
                        data3=["晴","阵雨","大雨","晴","晴","多云","阴"];          //一周天气情况
                        break;
                    case 1:
                        data1=[32, 33, 35, 33, 29, 30, 30];
                        data2=[25, 23, 28, 25, 23, 22, 21];
                        data3=["晴","晴","晴","晴","晴","晴","晴"];
                        break;
                    case 2:
                        data1=[32, 33, 35, 33, 39, 30, 30];
                        data2=[25, 23, 28, 25, 23, 22, 21];
                        data3=["晴","大雨","阵雨","阵雨","阵雨","阵雨","阵雨"];
                        break;
                    case 3:
                        data1=[32, 33, 35, 33, 40, 30, 30];
                        data2=[25, 23, 28, 25, 23, 22, 21];
                        data3=["晴","多云","多云","多云","多云","多云","多云"];
                        break;
                }
                setLine(data1,data2,data3);
            })
        })
    </script>
</body>
</html>